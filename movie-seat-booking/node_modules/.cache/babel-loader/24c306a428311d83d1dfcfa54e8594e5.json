{"ast":null,"code":"var _jsxFileName = \"/home/tuyen/term_project/movie-seat-booking/src/Payment.js\";\nimport React, { useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport \"./Payment.css\";\n\nconst axios = require('axios');\n\nconst Payment = () => {\n  const url = useLocation();\n  const movieId = new URLSearchParams(url.search).get(\"movie-id\");\n  const strChosenSeats = new URLSearchParams(url.search).get(\"chosen-seats\");\n  const chosenSeats = strChosenSeats.split(\",\").map(seat => Number(seat));\n  const payment = new URLSearchParams(url.search).get(\"payment\");\n  const user = window.localStorage.getItem(\"username\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [score, setScore] = useState();\n  useEffect(() => {\n    axios.get('http://127.0.0.1:7897/score', {\n      params: {\n        username: user\n      }\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.status == 200) {\n        let resData = res.data;\n        setScore(resData);\n      } else {\n        console.log(res.status);\n      }\n    }); // \tlet movie = {\n    // \t\tid: id,\n    // \t\tname: \"Avenger\",\n    // \t\tmoviePrice: 10,\n    // \t\toccupiedSeats: [3, 5, 16, 18, 17, 22, 23]\n    // \t}\n    // \tsetLoading(false)\n    // \tsetMovie(movie)\n  }, []);\n\n  const handlePay = () => {\n    axios.post('http://127.0.0.1:7898/transaction', {\n      username,\n      password,\n      amount: payment,\n      receiver: \"cinema\"\n    }).then(function (res) {\n      if (res.status == 200) {\n        axios.post('http://127.0.0.1:7897/order', {\n          id_movie: movieId,\n          seat: chosenSeats,\n          username: user\n        }).then(function (res) {\n          if (res.status) {\n            alert(\"Booking success!\");\n            window.location.href = `/home`;\n          }\n        });\n      } else {\n        alert(\"Transaction fail\");\n      }\n    });\n  };\n\n  const handleOnChangeUsername = e => {\n    setUsername(e.target.value);\n  };\n\n  const handleOnChangePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"payment-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, \"Payment Details\"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Bank Account Details\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    class: \"form-control\",\n    placeholder: \"Username\",\n    onChange: handleOnChangeUsername,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    placeholder: \"Password\",\n    onChange: handleOnChangePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Receiver\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, \"CINEMA\"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Discount Score\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, \"$ \", score), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Total Payment\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"$ \", payment), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pay-btn\",\n    onClick: handlePay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"Pay\"))));\n};\n\nexport default Payment;","map":{"version":3,"sources":["/home/tuyen/term_project/movie-seat-booking/src/Payment.js"],"names":["React","useState","useLocation","axios","require","Payment","url","movieId","URLSearchParams","search","get","strChosenSeats","chosenSeats","split","map","seat","Number","payment","user","window","localStorage","getItem","username","setUsername","password","setPassword","score","setScore","useEffect","params","then","res","console","log","status","resData","data","handlePay","post","amount","receiver","id_movie","alert","location","href","handleOnChangeUsername","e","target","value","handleOnChangePassword"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { useLocation } from \"react-router-dom\";\nimport \"./Payment.css\";\n\nconst axios = require('axios');\n\nconst Payment = () => {\n    const url = useLocation();\n    const movieId = new URLSearchParams(url.search).get(\"movie-id\")\n    const strChosenSeats = new URLSearchParams(url.search).get(\"chosen-seats\")\n    const chosenSeats = strChosenSeats.split(\",\").map(seat => Number(seat))\n    const payment = new URLSearchParams(url.search).get(\"payment\")\n    const user = window.localStorage.getItem(\"username\")\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [score,setScore] = useState();\n    useEffect(() => {\n\t\taxios.get('http://127.0.0.1:7897/score', {\n\t\t\tparams: {\n\t\t\t\tusername: user\n\t\t\t}\n\t\t})\n\t\t\t.then(function (res) {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.status == 200) {\n\t\t\t\t\tlet resData = res.data\n\t\t\t\t\tsetScore(resData)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.status)\n\t\t\t\t}\n\t\t\t})\n\n\t// \tlet movie = {\n\t// \t\tid: id,\n\t// \t\tname: \"Avenger\",\n\t// \t\tmoviePrice: 10,\n\t// \t\toccupiedSeats: [3, 5, 16, 18, 17, 22, 23]\n\t// \t}\n\t// \tsetLoading(false)\n\t// \tsetMovie(movie)\n\t }\n\t , []);\n\n    const handlePay = () => {\n        axios.post('http://127.0.0.1:7898/transaction', {\n            username,\n            password,\n            amount: payment,\n            receiver: \"cinema\"\n        })\n            .then(function (res) {\n                if (res.status==200) {\n                    axios.post('http://127.0.0.1:7897/order', {\n                        id_movie:movieId,\n                        seat:chosenSeats,\n                        username:user\n                    })\n                        .then(function (res) {\n                            if(res.status){\n                                alert(\"Booking success!\")\n                                window.location.href = `/home`\n                            }\n                        })\n                } else {\n                    alert(\"Transaction fail\")\n                }\n            })\n    }\n    const handleOnChangeUsername = (e) => {\n        setUsername(e.target.value)\n    }\n    const handleOnChangePassword = (e) => {\n        setPassword(e.target.value)\n    }\n    return (\n        <div className=\"payment-container\">\n            <div className=\"payment\">\n                <h4 className=\"payment-title\">Payment Details</h4>\n                <h5 className=\"payment-title-2\">Bank Account Details</h5>\n                <form>\n                    <div class=\"form-row\">\n                        <div class=\"form-group col-md-6\">\n                            <label>Username</label>\n                            <input class=\"form-control\" placeholder=\"Username\" onChange={handleOnChangeUsername} />\n                        </div>\n                        <div class=\"form-group col-md-6\">\n                            <label>Password</label>\n                            <input type=\"password\" class=\"form-control\" placeholder=\"Password\" onChange={handleOnChangePassword} />\n                        </div>\n                    </div>\n                </form>\n                <h5 className=\"payment-title-2\">Receiver</h5>\n                <h6 className=\"payment-value\">CINEMA</h6>\n                <h5 className=\"payment-title-2\">Discount Score</h5>\n                <h6 className=\"payment-value\">$ {score}</h6>\n                <h5 className=\"payment-title-2\">Total Payment</h5>\n                <h6 className=\"payment-value\">$ {payment}</h6>\n                <hr />\n                <div className=\"payment-footer\">\n                    <div className=\"pay-btn\" onClick={handlePay}>Pay</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Payment\n"]},"metadata":{},"sourceType":"module"}