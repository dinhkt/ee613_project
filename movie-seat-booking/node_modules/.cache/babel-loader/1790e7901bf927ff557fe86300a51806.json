{"ast":null,"code":"var _jsxFileName = \"/home/tuyen/term_project/movie-seat-booking/src/Payment.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport \"./Payment.css\";\nimport Switch from \"react-switch\";\n\nconst axios = require('axios');\n\nconst Payment = () => {\n  const url = useLocation();\n  const movieId = new URLSearchParams(url.search).get(\"movie-id\");\n  const strChosenSeats = new URLSearchParams(url.search).get(\"chosen-seats\");\n  const chosenSeats = strChosenSeats.split(\",\").map(seat => Number(seat));\n  const payment = new URLSearchParams(url.search).get(\"payment\");\n  const user = window.localStorage.getItem(\"username\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [score, setScore] = useState();\n  const [finalpayment, setFinal] = useState();\n  const [checked, setChecked] = useState(false);\n  useEffect(() => {\n    axios.get('http://127.0.0.1:7897/score', {\n      params: {\n        username: user\n      }\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.status == 200) {\n        let resData = res.data;\n        setScore(resData);\n      } else {\n        console.log(res.status);\n      }\n    });\n  }, []);\n\n  const handlePay = () => {\n    axios.post('http://127.0.0.1:7898/transaction', {\n      username,\n      password,\n      amount: payment,\n      receiver: \"cinema\"\n    }).then(function (res) {\n      if (res.status == 200) {\n        axios.post('http://127.0.0.1:7897/order', {\n          id_movie: movieId,\n          seat: chosenSeats,\n          username: user\n        }).then(function (res) {\n          if (res.status) {\n            alert(\"Booking success!\");\n            window.location.href = `/home`;\n          }\n        });\n      } else {\n        alert(\"Transaction fail\");\n      }\n    });\n  };\n\n  const handleOnChangeUsername = e => {\n    setUsername(e.target.value);\n  };\n\n  const handleOnChangePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  const handleSwitchChange = e => {\n    setChecked({\n      checked\n    });\n    setFinal(payment - score / 10);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"payment-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"Payment Details\"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, \"Bank Account Details\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    class: \"form-control\",\n    placeholder: \"Username\",\n    onChange: handleOnChangeUsername,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    placeholder: \"Password\",\n    onChange: handleOnChangePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Receiver\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"CINEMA\"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, \"Total Payment\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"$ \", payment), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, \"Use Discount Score \"), /*#__PURE__*/React.createElement(Switch, {\n    onChange: handleSwitchChange,\n    checked: checked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \" \", score, \" points\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"- $\", score / 10, \" \"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"payment-title-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Final Payment\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"payment-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"$ \", payment), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pay-btn\",\n    onClick: handlePay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"Pay\"))));\n};\n\nexport default Payment;","map":{"version":3,"sources":["/home/tuyen/term_project/movie-seat-booking/src/Payment.js"],"names":["React","useState","useEffect","useLocation","Switch","axios","require","Payment","url","movieId","URLSearchParams","search","get","strChosenSeats","chosenSeats","split","map","seat","Number","payment","user","window","localStorage","getItem","username","setUsername","password","setPassword","score","setScore","finalpayment","setFinal","checked","setChecked","params","then","res","console","log","status","resData","data","handlePay","post","amount","receiver","id_movie","alert","location","href","handleOnChangeUsername","e","target","value","handleOnChangePassword","handleSwitchChange"],"mappings":"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","sourcesContent":["import React, { useState ,useEffect} from \"react\"\nimport { useLocation } from \"react-router-dom\";\nimport \"./Payment.css\";\nimport Switch from \"react-switch\"\n\nconst axios = require('axios');\n\nconst Payment = () => {\n    const url = useLocation();\n    const movieId = new URLSearchParams(url.search).get(\"movie-id\")\n    const strChosenSeats = new URLSearchParams(url.search).get(\"chosen-seats\")\n    const chosenSeats = strChosenSeats.split(\",\").map(seat => Number(seat))\n    const payment = new URLSearchParams(url.search).get(\"payment\")\n    const user = window.localStorage.getItem(\"username\")\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [score,setScore] = useState();\n    const [finalpayment,setFinal]=useState();\n    const [checked,setChecked]=useState(false);\n\n    useEffect(() => {\n\t\taxios.get('http://127.0.0.1:7897/score', {\n\t\t\tparams: {\n\t\t\t\tusername: user\n\t\t\t}\n\t\t})\n\t\t\t.then(function (res) {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.status == 200) {\n\t\t\t\t\tlet resData = res.data\n\t\t\t\t\tsetScore(resData)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.status)\n\t\t\t\t}\n\t\t\t})\n\t }\n\t , []);\n\n    const handlePay = () => {\n        axios.post('http://127.0.0.1:7898/transaction', {\n            username,\n            password,\n            amount: payment,\n            receiver: \"cinema\"\n        })\n            .then(function (res) {\n                if (res.status==200) {\n                    axios.post('http://127.0.0.1:7897/order', {\n                        id_movie:movieId,\n                        seat:chosenSeats,\n                        username:user\n                    })\n                        .then(function (res) {\n                            if(res.status){\n                                alert(\"Booking success!\")\n                                window.location.href = `/home`\n                            }\n                        })\n                } else {\n                    alert(\"Transaction fail\")\n                }\n            })\n    }\n    const handleOnChangeUsername = (e) => {\n        setUsername(e.target.value)\n    }\n    const handleOnChangePassword = (e) => {\n        setPassword(e.target.value)\n    }\n    const handleSwitchChange = (e) => {\n        setChecked({checked});\n        setFinal(payment-score/10);\n    }\n    return (\n        <div className=\"payment-container\">\n            <div className=\"payment\">\n                <h4 className=\"payment-title\">Payment Details</h4>\n                <h5 className=\"payment-title-2\">Bank Account Details</h5>\n                <form>\n                    <div class=\"form-row\">\n                        <div class=\"form-group col-md-6\">\n                            <label>Username</label>\n                            <input class=\"form-control\" placeholder=\"Username\" onChange={handleOnChangeUsername} />\n                        </div>\n                        <div class=\"form-group col-md-6\">\n                            <label>Password</label>\n                            <input type=\"password\" class=\"form-control\" placeholder=\"Password\" onChange={handleOnChangePassword} />\n                        </div>\n                    </div>\n                </form>\n                <h5 className=\"payment-title-2\">Receiver</h5>\n                <h6 className=\"payment-value\">CINEMA</h6>\n                <h5 className=\"payment-title-2\">Total Payment</h5>\n                <h6 className=\"payment-value\">$ {payment}</h6>\n                <h5>\n                    <span className=\"payment-title-2\">Use Discount Score </span>\n                    <Switch onChange={handleSwitchChange} checked={checked} /> \n                </h5>  \n                \n                <h6 className=\"payment-value\"> {score} points</h6>\n             \n                <h6 className=\"payment-value\">- ${score/10} </h6>\n                <h5 className=\"payment-title-2\">Final Payment</h5>\n                <h6 className=\"payment-value\">$ {payment}</h6>\n                <hr />\n                <div className=\"payment-footer\">\n                    <div className=\"pay-btn\" onClick={handlePay}>Pay</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Payment\n"]},"metadata":{},"sourceType":"module"}