{"ast":null,"code":"var _jsxFileName = \"/home/tuyen/term_project/movie-seat-booking/src/Booking.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Booking.css\";\nimport SeatAvailability from \"./components/SeatAvailability\";\nimport SeatMatrix from \"./components/SeatMatrix\";\nimport PriceCalculator from \"./components/PriceCalculator\";\nimport GithubLogo from './components/GithubLogo';\nimport MovieContext from './contexts/MovieContext';\nimport styled from \"styled-components\";\n\nconst axios = require('axios');\n\nconst Button = styled.button`\n  background-color: red;\n  color: white;\n  font-size: 20px;\n  padding: 10px 60px;\n  border-radius: 5px;\n  margin: 10px 0px;\n  cursor: pointer;\n`;\n\nconst Booking = () => {\n  //initial data \n  const url = window.location.href;\n  const id = url.split(\"/\")[4];\n  const [chosenSeats, setChosenSeats] = useState([]);\n  const [movie, setMovie] = useState({});\n  const [loading, setLoading] = useState(true); //call rest api to get movie data\n\n  useEffect(() => {\n    axios.get('http://127.0.0.1:7897/movies', {\n      params: {\n        movieId: id\n      }\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.status == 200) {\n        let resData = res.data;\n        setMovie(resData);\n        setLoading(false);\n      } else {\n        console.log(res.status);\n      }\n    }); // \tlet movie = {\n    // \t\tid: id,\n    // \t\tname: \"Avenger\",\n    // \t\tmoviePrice: 10,\n    // \t\toccupiedSeats: [3, 5, 16, 18, 17, 22, 23]\n    // \t}\n    // \tsetLoading(false)\n    // \tsetMovie(movie)\n  }, []);\n\n  const handlePayment = () => {\n    window.location.href = `/payment?movie-id=${movie.id}&chosen-seats=${chosenSeats}&payment=${movie.moviePrice * chosenSeats.length}`;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 3\n    }\n  }, !loading && /*#__PURE__*/React.createElement(MovieContext.Provider, {\n    value: {\n      movie,\n      chosenSeats,\n      changeState: setChosenSeats\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(GithubLogo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(SeatMatrix, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(SeatAvailability, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(PriceCalculator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handlePayment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }, \" Payment \")));\n};\n\nexport default Booking;","map":{"version":3,"sources":["/home/tuyen/term_project/movie-seat-booking/src/Booking.js"],"names":["React","useState","useEffect","SeatAvailability","SeatMatrix","PriceCalculator","GithubLogo","MovieContext","styled","axios","require","Button","button","Booking","url","window","location","href","id","split","chosenSeats","setChosenSeats","movie","setMovie","loading","setLoading","get","params","movieId","then","res","console","log","status","resData","data","handlePayment","moviePrice","length","changeState"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,eAAP;AAEA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AAEA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMC,MAAM,GAAGH,MAAM,CAACI,MAAO;;;;;;;;CAA7B;;AAUA,MAAMC,OAAO,GAAG,MAAM;AACrB;AACA,QAAMC,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA5B;AACA,QAAMC,EAAE,GAAGJ,GAAG,CAACK,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAX;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCpB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACqB,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACuB,OAAD,EAAUC,UAAV,IAAwBxB,QAAQ,CAAC,IAAD,CAAtC,CANqB,CAOrB;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACfO,IAAAA,KAAK,CAACiB,GAAN,CAAU,8BAAV,EAA0C;AACzCC,MAAAA,MAAM,EAAE;AACPC,QAAAA,OAAO,EAAEV;AADF;AADiC,KAA1C,EAKEW,IALF,CAKO,UAAUC,GAAV,EAAe;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAIA,GAAG,CAACG,MAAJ,IAAc,GAAlB,EAAuB;AACtB,YAAIC,OAAO,GAAGJ,GAAG,CAACK,IAAlB;AACAZ,QAAAA,QAAQ,CAACW,OAAD,CAAR;AACAT,QAAAA,UAAU,CAAC,KAAD,CAAV;AACA,OAJD,MAIO;AACNM,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,MAAhB;AACA;AACD,KAdF,EADe,CAiBhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,GAzBO,EAyBL,EAzBK,CAAT;;AA2BA,QAAMG,aAAa,GAAG,MAAM;AAC3BrB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAwB,qBAAoBK,KAAK,CAACJ,EAAG,iBAAgBE,WAAY,YAAWE,KAAK,CAACe,UAAN,GAAmBjB,WAAW,CAACkB,MAAO,EAAlI;AACA,GAFD;;AAIA,sBACC;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,CAACd,OAAD,iBAAa,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAE;AAAEF,MAAAA,KAAF;AAASF,MAAAA,WAAT;AAAsBmB,MAAAA,WAAW,EAAElB;AAAnC,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACZ,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,eAEZ,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFY,eAGZ,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHY,eAIZ,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJY,eAKZ,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEe,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALY,CAFf,CADD;AAcA,CArDD;;AAuDA,eAAevB,OAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"./Booking.css\"\n\nimport SeatAvailability from \"./components/SeatAvailability\"\nimport SeatMatrix from \"./components/SeatMatrix\"\nimport PriceCalculator from \"./components/PriceCalculator\"\nimport GithubLogo from './components/GithubLogo'\n\nimport MovieContext from './contexts/MovieContext'\nimport styled from \"styled-components\"\n\nconst axios = require('axios');\n\nconst Button = styled.button`\n  background-color: red;\n  color: white;\n  font-size: 20px;\n  padding: 10px 60px;\n  border-radius: 5px;\n  margin: 10px 0px;\n  cursor: pointer;\n`;\n\nconst Booking = () => {\n\t//initial data \n\tconst url = window.location.href\n\tconst id = url.split(\"/\")[4]\n\tconst [chosenSeats, setChosenSeats] = useState([]);\n\tconst [movie, setMovie] = useState({})\n\tconst [loading, setLoading] = useState(true)\n\t//call rest api to get movie data\n\tuseEffect(() => {\n\t\taxios.get('http://127.0.0.1:7897/movies', {\n\t\t\tparams: {\n\t\t\t\tmovieId: id\n\t\t\t}\n\t\t})\n\t\t\t.then(function (res) {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.status == 200) {\n\t\t\t\t\tlet resData = res.data\n\t\t\t\t\tsetMovie(resData)\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.status)\n\t\t\t\t}\n\t\t\t})\n\n\t// \tlet movie = {\n\t// \t\tid: id,\n\t// \t\tname: \"Avenger\",\n\t// \t\tmoviePrice: 10,\n\t// \t\toccupiedSeats: [3, 5, 16, 18, 17, 22, 23]\n\t// \t}\n\t// \tsetLoading(false)\n\t// \tsetMovie(movie)\n\t }, []);\n\n\tconst handlePayment = () => {\n\t\twindow.location.href = `/payment?movie-id=${movie.id}&chosen-seats=${chosenSeats}&payment=${movie.moviePrice * chosenSeats.length}`\n\t}\n\n\treturn (\n\t\t<div className=\"main container\">\n\t\t\t{\n\t\t\t\t!loading && (<MovieContext.Provider value={{ movie, chosenSeats, changeState: setChosenSeats }}>\n\t\t\t\t\t<GithubLogo />\n\t\t\t\t\t<SeatMatrix />\n\t\t\t\t\t<SeatAvailability />\n\t\t\t\t\t<PriceCalculator />\n\t\t\t\t\t<Button onClick={handlePayment}> Payment </Button>\n\t\t\t\t</MovieContext.Provider>)\n\t\t\t}\n\n\t\t</div>\n\t)\n}\n\nexport default Booking\n"]},"metadata":{},"sourceType":"module"}